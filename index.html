<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>NewJeans Y2K Experience</title>
    <style>
        /* ‰øùÊåÅÂéüÊúâÊ†∑Âºè‰∏çÂèò */
        :root {
          --nj-pink: #ff9dbb;
          --nj-blue: #8ac7ff;
        }

        body {
          background: #0000AA url("images/bg/matrix-bg.gif");
          color: #00FF00;
          font-family: 'MS Sans Serif', 'Microsoft Sans Serif', 'SimSun', 'Microsoft YaHei', sans-serif;
          overflow: hidden;
          margin: 0;
        }

        .crt::after {
          content: "";
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),
            linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
          pointer-events: none;
        }

        .windows98-panel {
          position: fixed;
          border: 3px solid;
          border-color: #FFFFFF #808080 #808080 #FFFFFF;
          background: #C0C0C0;
          box-shadow: 5px 5px 10px rgba(0,0,0,0.5);
          cursor: default;
          z-index: 1;
        }

        .windows98-panel.active-window {
          z-index: 999;
        }

        .title-bar {
          background: linear-gradient(90deg, #000080, #1084d0);
          padding: 4px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          cursor: move;
        }

        .member-container {
          position: relative;
          display: inline-block;
          margin: 10px;
        }

        .member-pixel {
          width: 64px;
          height: 64px;
          image-rendering: pixelated;
          border: 2px solid var(--nj-pink);
          margin: 5px;
          cursor: pointer;
          transition: transform 0.2s;
        }

        .member-pixel:hover {
          transform: scale(1.1);
          border-color: var(--nj-blue);
        }

        .member-name {
          position: absolute;
          bottom: -15px;
          left: 50%;
          transform: translateX(-50%);
          font-size: 0.8em;
          color: white;
          text-shadow: 1px 1px black;
          white-space: nowrap;
        }

        #tamagochi {
          background: #FFF;
          border: 2px inset;
          padding: 15px;
          margin: 10px;
        }

        .pet {
          width: 64px;
          height: 64px;
          background: url('images/pet/pixel-pet.gif') no-repeat;
          image-rendering: pixelated;
          margin: 10px auto;
        }

        #taskbar {
          position: fixed;
          bottom: 0;
          width: 100%;
          background: #C0C0C0;
          border-top: 2px solid #FFF;
          display: flex;
          justify-content: space-between;
          padding: 2px;
          font-family: 'MS Sans Serif', sans-serif;
        }

        .floating-album {
          position: absolute;
          animation: float 3s ease-in-out infinite;
          filter: sepia(0.3) contrast(1.2);
          width: 80px;
        }

        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }

        .lyrics-box {
          background: rgba(0, 0, 0, 0.7);
          border: 1px dashed var(--nj-blue);
          padding: 10px;
          position: fixed;
          right: 20px;
          top: 50%;
          transform: translateY(-50%);
          width: 200px;
          font-family: 'MS Sans Serif', sans-serif;
        }

.note {
  image-rendering: pixelated;
  box-shadow: 0 0 8px rgba(255,255,255,0.5);
}

#game-area {
    height: 300px;
    background: black url('images/icons/game-icon.gif') no-repeat center center !important;
    background-size: cover !important;
    position: relative;
    overflow: hidden;
    border: 3px solid #808080;
    image-rendering: pixelated;
}

.lane {
    width: 25%;
    height: 100%;
    border-left: 1px solid rgba(255,255,255,0.2);
    border-right: 1px solid rgba(255,255,255,0.2);

/* Ê∑ªÂä†CRTÊâ´ÊèèÁ∫øÂä®Áîª */
@keyframes scanline {
  from { transform: translateY(-100%); }
  to { transform: translateY(100%); }
}
#game-area::after {
  content: "";
  position: absolute;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom,
    rgba(255,255,255,0.1) 0%,
    rgba(0,0,0,0.2) 10%,
    transparent 30%
  );
  animation: scanline 2s linear infinite;
  pointer-events: none;
}
button.pixel-font {
  font-family: 'MS Sans Serif', sans-serif;
  font-size: 14px;
  color: #000;
}

button.pixel-font:hover {
  background: #A0A0A0;
  border-color: #808080 #FFF #FFF #808080;
}
        @keyframes moveGameIcon {
    0% { transform: translateX(-50%) translateY(0); }
    100% { transform: translateX(-50%) translateY(30px); }
}
        #members-container {
    display: flex;
    flex-wrap: nowrap;  /* Á¶ÅÊ≠¢Êç¢Ë°å */
    justify-content: flex-start;  /* ‰ªéÂ∑¶ÂêëÂè≥ÊéíÂàó */
    align-items: center;
    gap: 10px;  /* Â§¥ÂÉè‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    overflow-x: auto; /* ÂÖÅËÆ∏Ê®™ÂêëÊªöÂä® */
    max-width: 100%;
}
        #unlocked-members {
    min-height: 150px; /* ÈôêÂà∂ÊúÄÂ∞èÈ´òÂ∫¶ */
    height: auto;
    padding: 15px;
}

    </style>
</head>
<body>
<div class="crt">
    <!-- Ê°åÈù¢ÂõæÊ†á -->
    <div class="desktop-icon" ondblclick="openMediaPlayer()" style="position: absolute; left: 20px; top: 20px;">
        <img alt="NewJeans Disc" src="images/icons/cd-icon.gif" style="width:48px;height:48px">
        <div class="pixel-font" style="color: white;">NewJeans_Disc</div>
    </div>

    <!-- ‰∏ªÁ≥ªÁªüÁ™óÂè£ -->
    <div class="windows98-panel" style="left: 50px; top: 100px; width: 300px;">
        <div class="title-bar">
            <span class="pixel-font">SYSTEM_INFO.EXE</span>
            <div class="controls">‚ùé</div>
        </div>
        <div class="content">
            <img alt="Loading..." src="images/loading.gif" style="width: 100px;">
            <p class="pixel-font">Booting NewJeans OS...</p>
        </div>
    </div>

    <!-- ËôöÊãüÂÆ†Áâ©Á™óÂè£ -->
    <div class="windows98-panel" style="left: 400px; top: 80px; width: 200px;">
        <div class="title-bar">
            <span class="pixel-font">DIGI_PET.EXE</span>
            <div class="controls">‚ùé</div>
        </div>
        <div id="tamagochi">
            <div class="pet"></div>
            <div class="pixel-font" id="pet-status">HUNGER: ‚ñ∞‚ñ∞‚ñ∞‚ñ∞‚ñ∞<br>MOOD: ‚ñ∞‚ñ∞‚ñ∞‚ñ∞‚ñ∞</div>
            <button class="pixel-font" onclick="feed()">üéÆ Feed</button>
            <button class="pixel-font" onclick="play()">üïπÔ∏è Play</button>
        </div>
    </div>

    <!-- ÊàêÂëò‰∫íÂä®Á™óÂè£ -->
    <div class="windows98-panel" style="left: 100px; top: 300px; width: 400px;">
        <div class="title-bar">
            <span class="pixel-font">MEMBERS_1999.EXE</span>
            <div class="controls">‚ùé</div>
        </div>
        <div class="content" style="text-align: center;">
            <div class="member-container">
                <img alt="MINJI" class="member-pixel" onclick="showBio('minji')" src="images/members/minji.png">
                <div class="member-name pixel-font">MINJI</div>
            </div>
            <div class="member-container">
                <img alt="HANNI" class="member-pixel" onclick="showBio('hanni')" src="images/members/hanni.png">
                <div class="member-name pixel-font">HANNI</div>
            </div>
            <div class="member-container">
                <img alt="DANIELLE" class="member-pixel" onclick="showBio('danielle')"
                     src="images/members/danielle.png">
                <div class="member-name pixel-font">DANIELLE</div>
            </div>
            <div class="member-container">
                <img alt="HAERIN" class="member-pixel" onclick="showBio('haerin')" src="images/members/haerin.png">
                <div class="member-name pixel-font">HAERIN</div>
            </div>
            <div class="member-container">
                <img alt="HYEIN" class="member-pixel" onclick="showBio('hyein')" src="images/members/hyein.png">
                <div class="member-name pixel-font">HYEIN</div>
            </div>
            <div class="pixel-font" id="member-bio" style="margin: 15px; color: #000;"></div>
        </div>
    </div>

    <!-- NewJeans Âõ¢‰ΩìÁÖßÁâáÁ™óÂè£ -->
<div class="windows98-panel" style="left: 100px; top: 600px; width: 400px;">
    <div class="title-bar">
        <span class="pixel-font">üì∏ NJ_GROUP_PHOTOS.EXE</span>
        <div class="controls">‚ùé</div>
    </div>
    <div class="content" style="text-align: center;">
        <img id="group-photo" src="images/group/group1.jpg" style="width: 100%; border: 2px solid #000;">
        <div style="margin-top: 10px;">
            <button class="pixel-font" onclick="prevPhoto()">‚¨Ö ‰∏ä‰∏ÄÂº†</button>
            <button class="pixel-font" onclick="nextPhoto()">‰∏ã‰∏ÄÂº† ‚û°</button>
        </div>
    </div>
</div>

    <!-- Èü≥‰πêÊí≠ÊîæÂô®Á™óÂè£ -->
    <div class="windows98-panel" style="left: 600px; top: 150px; width: 320px;">
        <div class="title-bar">
            <span class="pixel-font">BUNNY_JAMMER.EXE</span>
            <div class="controls">‚ùé</div>
        </div>
        <div class="content">
            <div style="position: relative; height: 100px;">
                <img class="floating-album" src="images/albums/hypeboy.gif" style="left:10%">
                <img class="floating-album" src="images/albums/ditto.gif" style="left:60%;animation-delay:1s">
            </div>
            <audio controls id="nj-player" style="width:100%">
                <source src="audio/newjeans-hypeboy.mp3" type="audio/mp3">
            </audio>
            <div class="lyrics-box pixel-font" id="lyrics"></div>
        </div>
    </div>

    <!-- Âú®Áé∞ÊúâHTMLÁöÑwindows98-panelÂå∫ÂüüÊ∑ªÂä† -->
    <div class="windows98-panel" style="left: 250px; top: 450px; width: 480px;">
        <div class="title-bar">
            <span class="pixel-font">üéµ RHYTHM_BUNNY.EXE</span>
            <div class="controls">‚ùé</div>
        </div>
        <div class="content" style="padding:10px">
            <div class="pixel-font" style="text-align:center; margin:5px">
                üïπÔ∏è ÈöæÂ∫¶Ôºö<select id="difficulty" style="background:#C0C0C0; border:2px inset">
                <option>EASY</option>
                <option>NORMAL</option>
                <option>HARD</option>
            </select>
                üèÜ ÊúÄÈ´òÂàÜÔºö<span id="highscore">0</span>
            </div>
            <div style="text-align: center; margin: 10px 0;">
                <button id="start-game-btn" class="pixel-font" id="start-game-btn"
                        onclick="game.start()"
                        style="background: #C0C0C0;
                           border: 2px outset #FFF #808080 #808080 #FFF;
                           padding: 6px 12px;
                           cursor: pointer;">
                    ‚ñ∂ START GAME
                </button>
                <button class="pixel-font"
                        onclick="game.stop()"
                        style="background: #C0C0C0;
                 border: 2px outset #FFF #808080 #808080 #FFF;
                 padding: 6px 12px;
                 cursor: pointer;
                 margin-left: 10px;">
                    ‚èπ STOP GAME
                </button>
            </div>

<!-- üéÄ ÊàêÂëòËß£ÈîÅÁ™óÂè£ -->
<div id="unlocked-members" class="windows98-panel"
     style="position: absolute; left: 750px; top: 150px; width: 300px; ">
    <div class="title-bar">
        <span class="pixel-font">üåü UNLOCKED MEMBERS</span>
        <button id="close-members-btn"
                style="float: right; background: none; color: white; border: none; cursor: pointer;">‚ùé</button>
    </div>
    <div class="content pixel-font" style="text-align: center; background: white; padding: 10px;">
        <p>üíéÂú®Rhythm BunnyËææÂà∞È´òÂàÜ Êî∂ÈõÜÊàêÂëòÂ§ßÂ§¥Ë¥¥ÔºÅ</p>
        <div id="members-container"></div>
    </div>
</div>

<!-- üéµ ‚ÄúÊ∏∏Áé©ÊåáÂçó‚Äù ÊåâÈíÆ -->
<button id="show-guide-btn" class="pixel-font"
        style="background: #C0C0C0; border: 2px outset #FFF #808080 #808080 #FFF;
               padding: 6px 12px; cursor: pointer; margin-top: 10px;">
    üìñ Ê∏∏Áé©ÊåáÂçó
</button>

<!-- üéÆ Ê∏∏Áé©ÊåáÂçóÁ™óÂè£ -->
<div id="game-guide" class="windows98-panel"
     style="display: none; position: fixed; left: 50%; top: 50%;
            transform: translate(-50%, -50%);
            width: 400px; padding: 10px; z-index: 1000;">
    <div class="title-bar">
        <span class="pixel-font">üìñ Rhythm Bunny - Ê∏∏Áé©ÊåáÂçó</span>
        <button id="close-guide-btn"
                style="float: right; background: red; color: white; border: none; cursor: pointer;">‚ùé</button>
    </div>
    <div class="content pixel-font" style="max-height: 300px; overflow-y: auto; background: white; padding: 10px;">
        <p><strong>üéØ Ê∏∏ÊàèÁõÆÊ†áÔºö</strong> ÂâçÂ•èÁªìÊùüÂêéÊåâÈîÆÂáªÊâìÈü≥Á¨¶Ôºå‰øùÊåÅËøûÂáªÔºåÊåëÊàòÈ´òÂàÜÔºÅ</p>
        <p><strong>üéÆ Êìç‰ΩúÊñπÂºèÔºö</strong></p>
        <ul>
            <li><strong>A</strong> - Á¨¨‰∏ÄËΩ®ÈÅì</li>
            <li><strong>S</strong> - Á¨¨‰∫åËΩ®ÈÅì</li>
            <li><strong>D</strong> - Á¨¨‰∏âËΩ®ÈÅì</li>
            <li><strong>F</strong> - Á¨¨ÂõõËΩ®ÈÅì</li>
        </ul>
        <p>Ë∑üÈöèÈü≥‰πêÊåâÈîÆÔºåÈü≥Á¨¶ËøõÂÖ•Êé•ËøëÂ∫ïÈÉ®ÁöÑÂà§ÂÆöÂå∫Êó∂ÂáªÊâìÔºÅ</p>
        <p><strong>üî• Â∞èÊäÄÂ∑ßÔºö</strong> ËøûÂáªË∂äÈ´òÔºåÂæóÂàÜÂä†ÊàêË∂äÈ´òÔºÅ</p>
    </div>
</div>

            <div id="game-area"
                 style="height:300px; background:black; position:relative; overflow:hidden;
                border:3px solid #808080; image-rendering:pixelated">
                <!-- Èü≥Á¨¶Â∞ÜÂä®ÊÄÅÁîüÊàêÂú®Ê≠§ -->
            </div>
            <div class="pixel-font" style="text-align:center; margin:5px">
                üî• COMBO: <span id="combo">0</span>
                üíØ SCORE: <span id="score">0</span>
            </div>
        </div>
    </div>

    <!-- Áä∂ÊÄÅÊ†è -->
    <div id="taskbar">
        <div class="pixel-font">üìª NewJeans OS v1.0</div>
        <div class="pixel-font" id="clock">üïí 00:00 AM</div>
    </div>
</div>

<script>
    // ‰ΩøÁî®Èó≠ÂåÖÈöîÁ¶ªÊãñÊãΩÁ≥ªÁªü
   (function() {
     // ÊãñÊãΩÁä∂ÊÄÅÁÆ°ÁêÜÂô®ÔºàÈÅøÂÖçÂÖ®Â±ÄÊ±°ÊüìÔºâ
     const dragManager = {
       isDragging: false,
       currentWindow: null,
       startX: 0,
       startY: 0,
       offsetX: 0,
       offsetY: 0
     };

     // Á™óÂè£Â±ÇÁ∫ßËÆ°Êï∞Âô®
     let zIndexCounter = 100;

     // ÂàùÂßãÂåñÊâÄÊúâÁ™óÂè£
     function initWindows() {
       document.querySelectorAll('.windows98-panel').forEach(win => {
         win.style.zIndex = zIndexCounter++;
         win.querySelector('.title-bar').addEventListener('mousedown', startDrag);
       });
     }

     // ÂºÄÂßãÊãñÊãΩ
     function startDrag(e) {
       e.stopPropagation();

       dragManager.isDragging = true;
       dragManager.currentWindow = e.target.closest('.windows98-panel');
       dragManager.currentWindow.style.zIndex = zIndexCounter++;

       const rect = dragManager.currentWindow.getBoundingClientRect();
       dragManager.startX = e.clientX;
       dragManager.startY = e.clientY;
       dragManager.offsetX = e.clientX - rect.left;
       dragManager.offsetY = e.clientY - rect.top;
     }

     // Â§ÑÁêÜÊãñÊãΩ‰∏≠
     function handleDrag(e) {
       if (!dragManager.isDragging) return;

       const newX = e.clientX - dragManager.offsetX;
       const newY = e.clientY - dragManager.offsetY;

       dragManager.currentWindow.style.left = `${newX}px`;
       dragManager.currentWindow.style.top = `${newY}px`;
     }

     // ÁªìÊùüÊãñÊãΩ
     function stopDrag() {
       dragManager.isDragging = false;
       dragManager.currentWindow = null;
     }

     // ‰∫ã‰ª∂ÁªëÂÆöÔºà‰ΩøÁî®passiveÊîπÂñÑÊÄßËÉΩÔºâ
     document.addEventListener('mousemove', handleDrag, { passive: true });
     document.addEventListener('mouseup', stopDrag);
     window.addEventListener('load', initWindows);

     // Êö¥Èú≤ÂøÖË¶ÅÊé•Âè£ÁªôÊ∏∏Êàè
     window.windowManager = {
       bringToFront: (win) => {
         win.style.zIndex = zIndexCounter++;
       }
     };
   })();

       // ‰øÆÂ§çÂêéÁöÑÂÆ†Áâ©Á≥ªÁªü
       let petStats = { hunger: 5, mood: 5 };

       // Ëá™Âä®ÂáèÂ∞ëÁä∂ÊÄÅ
       function autoDecrease() {
         setInterval(() => {
           petStats.hunger = Math.max(0, petStats.hunger - 1);
           petStats.mood = Math.max(0, petStats.mood - 1);
           updatePet();
         }, 30000); // ÊØè30ÁßíÂáèÂ∞ë1ÁÇπ
       }

       function feed() {
         petStats.hunger = Math.min(5, petStats.hunger + 1); // ÊØèÊ¨°ÂñÇÂÖª+1
         updatePet();
       }

       function play() {
         petStats.mood = Math.min(5, petStats.mood + 1); // ÊØèÊ¨°Áé©ËÄç+1
         updatePet();
       }

       function updatePet() {
         const statusElement = document.getElementById("pet-status");
         statusElement.innerHTML =
           `HUNGER: ${'‚ñ∞'.repeat(petStats.hunger)}${'‚ñ±'.repeat(5 - petStats.hunger)}<br>
            MOOD: ${'‚ñ∞'.repeat(petStats.mood)}${'‚ñ±'.repeat(5 - petStats.mood)}`;

         // Ê∑ªÂä†ËßÜËßâÂèçÈ¶à
         statusElement.style.color = petStats.hunger <= 2 ? "#FF0000" : "#00FF00";
         statusElement.style.textShadow = petStats.mood <= 2 ? "0 0 5px red" : "none";
       }

       // Âú®È°µÈù¢Âä†ËΩΩ‰∫ã‰ª∂ÁõëÂê¨Âô®‰∏≠Ê∑ªÂä† ‚Üì‚Üì‚Üì
       window.addEventListener('load', () => {
         updateClock();
         autoDecrease(); // Êñ∞Â¢ûÁöÑÂàùÂßãÂåñË∞ÉÁî®
         document.querySelectorAll('.windows98-panel').forEach((win, index) => {
           win.style.zIndex = 100 + index;
         });
       });

       // ÊàêÂëòÁÆÄ‰ªãÁ≥ªÁªü
       const members = {
         minji: { bio: "üêª\n üëë Digital Leader\nüéÇ 2004.05.07" },
         hanni: { bio: "ü¶≠\n üé§ Melody Master\nüéÇ 2004.10.06" },
         danielle: { bio: "üê∂\n ‚ú® Sunshine Energy\nüéÇ 2005.04.11" },
         haerin: { bio: "üêà‚Äç‚¨õ\n üòº Cat-like Charisma\nüéÇ 2006.05.15" },
         hyein: { bio: "üêπ\n üêá Maknae Power\nüéÇ 2008.04.21" }
       };

       function showBio(member) {
         document.getElementById("member-bio").innerText = members[member].bio;
       }

       // Á≥ªÁªüÊó∂Èíü
       function updateClock() {
         const timeString = new Date().toLocaleTimeString('en-US', {
           hour: 'numeric',
           minute: '2-digit'
         });
         document.getElementById("clock").innerHTML = `üïí ${timeString}`;
       }
       setInterval(updateClock, 1000);

       // Ê≠åËØçÂêåÊ≠•Á§∫‰æã
       const hypeboyLyrics = [
         { time: 18.01, text: "One, two, three, four" },
         { time: 19.39, text: "Baby (baby)" },
         { time: 20.60, text: "Got me looking so crazy (crazy)" },
         { time: 23.15, text: "Îπ†Ï†∏Î≤ÑÎ¶¨Îäî daydream (daydream)" },
         { time: 25.35, text: "Got me feeling you, ÎÑàÎèÑ ÎßêÌï¥Ï§ÑÎûò?" },
         { time: 29.25, text: "ÎàÑÍ∞Ä ÎÇ¥Í≤å Î≠êÎùºÎì†, ÎÇ®Îì§Í≥ºÎäî Îã¨Îùº ÎÑå" },
         { time: 31.65, text: "Maybe you could be the one (one)" },
         { time: 33.98, text: "ÎÇ† ÎØøÏñ¥Î¥ê ÌïúÎ≤à, I'm not looking for just fun" },
         { time: 36.42, text: "Maybe I could be the one" },
         { time: 38.03, text: "Oh, baby, ÏòàÎØºÌïòÎåÄ ÎÇò lately" },
         { time: 42.23, text: "ÎÑà ÏóÜÏù¥Îäî Îß§Ïùº Îß§ÏùºÏù¥, yeah, Ïû¨ÎØ∏ÏóÜÏñ¥, Ïñ¥Ï©åÏßÄ?" },
         { time: 48.38, text: "I just want you call my phone right now" },
         { time: 50.53, text: "I just wanna hear \"you're mine\"" },
         { time: 52.90, text: "'Cause I know what you like, boy (ah-ah)" },
         { time: 57.52, text: "You're my chemical hype boy (ah-ah)" },
         { time: 62.43, text: "ÎÇ¥ ÏßÄÎÇúÎÇ†Îì§ÏùÄ, Îàà Îú®Î©¥ ÏûäÎäî Íøà" },
         { time: 67.68, text: "Hype boy, ÎÑàÎßå ÏõêÌï¥, hype boy, ÎÇ¥Í∞Ä Ï†ÑÌï¥" },
         { time: 71.57, text: "And we can go high" },
         { time: 74.15, text: "ÎßêÌï¥Î¥ê, yeah, ÎäêÍª¥Î¥ê, mmm, mmm" },
         { time: 76.49, text: "Take him to the sky" },
         { time: 79.03, text: "You know, I hype you, boy" },
         { time: 81.08, text: "ÎààÏùÑ Í∞êÏïÑ" },
         { time: 83.56, text: "ÎßêÌï¥Î¥ê, yeah, ÎäêÍª¥Î¥ê, mmm, mmm" },
         { time: 85.85, text: "Take him to the sky" },
         { time: 88.43, text: "You know, I hype you, boy" },
         { time: 94.25, text: "Ïû†Ïóê Îì§Î†§Í≥†, Ïû†Ïóê Îì§Î†§ Ìï¥ÎèÑ" },
         { time: 96.64, text: "ÎÑ§ ÏÉùÍ∞ÅÏóê Îòê ÏÉàÎ≤Ω ÏÑ∏ Ïãú, uh-oh" },
         { time: 99.00, text: "ÏïåÎ†§Ï§Ñ Í±∞Ïïº, they can't have you no more" },
         { time: 101.66, text: "Î¥êÎ¥ê Ïó¨Í∏∞ ÎÇ¥ Ïù¥Î¶Ñ Ïç®ÏûàÎã§Í≥†, yeah" },
         { time: 106.07, text: "ÎàÑÍ∞Ä ÎÇ¥Í≤å Î≠êÎùºÎì†, ÎÇ®Îì§Í≥ºÎäî Îã¨Îùº ÎÑå" },
         { time: 108.51, text: "Maybe you could be the one (one)" },
         { time: 110.68, text: "ÎÇ† ÎØøÏñ¥Î¥ê ÌïúÎ≤à, I'm not looking for just fun" },
         { time: 113.25, text: "Maybe I could be the one" },
         { time: 114.81, text: "Oh, baby, ÏòàÎØºÌïòÎåÄ ÎÇò lately" },
         { time: 119.03, text: "ÎÑà ÏóÜÏù¥Îäî Îß§Ïùº Îß§ÏùºÏù¥, yeah, Ïû¨ÎØ∏ÏóÜÏñ¥, Ïñ¥Ï©åÏßÄ?" },
         { time: 124.91, text: "I just want you call my phone right now" },
         { time: 127.37, text: "I just wanna hear \"you're mine\"" },
         { time: 129.59, text: "'Cause I know what you like, boy (ah-ah)" },
         { time: 134.29, text: "You're my chemical hype boy (ah-ah)" },
         { time: 139.39, text: "ÎÇ¥ ÏßÄÎÇúÎÇ†Îì§ÏùÄ, Îàà Îú®Î©¥ ÏûäÎäî Íøà" },
         { time: 144.42, text: "Hype boy, ÎÑàÎßå ÏõêÌï¥, hype boy, ÎÇ¥Í∞Ä Ï†ÑÌï¥" },
         { time: 148.13, text: "And we can go high" },
         { time: 150.78, text: "ÎßêÌï¥Î¥ê, yeah, ÎäêÍª¥Î¥ê, mmm, mmm" },
         { time: 153.15, text: "Take him to the sky" },
         { time: 155.74, text: "You know, I hype you, boy" },
         { time: 158.30, text: "ÎààÏùÑ Í∞êÏïÑ" },
         { time: 160.39, text: "ÎßêÌï¥Î¥ê, yeah, ÎäêÍª¥Î¥ê, mmm, mmm" },
         { time: 162.52, text: "Take him to the sky" },
         { time: 165.18, text: "You know, I hype you, boy" }
       ];

       document.getElementById("nj-player").ontimeupdate = function() {
         const currentTime = this.currentTime;

         // ÊñπÊ≥ï1Ôºöreduce Êü•Êâæ
         const currentLyric = hypeboyLyrics.reduce((last, cur) =>
           cur.time <= currentTime ? cur : last, null
         );

         // ÊñπÊ≥ï2ÔºöÂèçÂêëÊü•ÊâæÔºàÂ§áÈÄâÔºâ
         // const currentLyric = [...hypeboyLyrics].reverse().find(l => l.time <= currentTime);

         document.getElementById("lyrics").innerHTML = currentLyric?.text || "‚ô™ ‚ô´ ‚ô™";
       };

       // ÂàùÂßãÂåñ
       window.addEventListener('load', () => {
         updateClock();
         document.querySelectorAll('.windows98-panel').forEach((win, index) => {
           win.style.zIndex = 100 + index;
         });
       });

class RhythmGame {
  constructor() {
    this.isPlaying = false;
    this.notes = [];
    this.generatedNotes = new Set();
    this.score = 0;
    this.combo = 0;
    this.highScore = parseInt(localStorage.getItem('njHighScore')) || 0;
    this.keyMap = { 'a':1, 's':2, 'd':3, 'f':4 };
    this.noteSpeed = 3;
     this.unlockedMembers = new Set(); // Â≠òÂÇ®Â∑≤Ëß£ÈîÅÁöÑÊàêÂëò
        this.memberPhotos = {
            2000: { name: "Minji", image: "images/unlocked_members/minji.png" },
            4800: { name: "Hanni", image: "images/unlocked_members/hanni.png" },
            7200: { name: "Danielle", image: "images/unlocked_members/danielle.png" },
            10000: { name: "Haerin", image: "images/unlocked_members/haerin.png" },
            12000: { name: "Hyein", image: "images/unlocked_members/hyein.png" }
        };
    this.lastNoteTime = 0;
    this.song = new Audio('audio/newjeans-NewJeans.mp3');
    this.gameArea = document.getElementById('game-area');

    this.renderHighScore();
    document.addEventListener('keypress', this.handleInput.bind(this));
  }

  renderHighScore() {
    document.getElementById('highscore').textContent = this.highScore;
  }

start() {
    if (this.isPlaying) return;
    this.isPlaying = true;
    this.generatedNotes.clear();

    this.reset();
    this.song.currentTime = 0;
    this.song.play();
    this.isPlaying = true;

    if (!this.difficultyBound) {
        document.getElementById('difficulty').addEventListener('change', () => this.setDifficulty());
        this.difficultyBound = true;
    }

    this.gameLoop();
    this.setDifficulty();
    this.addGameIcon();
}

    gameLoop() {
        if (!this.isPlaying) return;
        this.generateNotes();
        this.updateNotes();
        requestAnimationFrame(() => this.gameLoop());
    }

  setDifficulty() {
    const diff = document.getElementById('difficulty').value;
    this.noteSpeed = { EASY:2, NORMAL:3, HARD:4 }[diff];
  }

    generateNotes() {
        if (!this.song) return console.error("Ê≠åÊõ≤Êú™Ê≠£Á°ÆÂä†ËΩΩÔºÅ");
        const currentTime = this.song.currentTime;

const beatMap = [
    { time: 14.41, lane: 3 },
    { time: 16.37, lane: 1 },
    { time: 18.28, lane: 4 },
    { time: 20.07, lane: 2 },
    { time: 22.17, lane: 1 },
    { time: 23.88, lane: 3 },
    { time: 25.92, lane: 4 },
    { time: 27.58, lane: 2 },
    { time: 29.28, lane: 1 },
    { time: 31.12, lane: 3 },
    { time: 31.34, lane: 2 },
    { time: 32.96, lane: 4 },
    { time: 34.41, lane: 1 },
    { time: 36.01, lane: 2 },
    { time: 37.84, lane: 3 },
    { time: 39.64, lane: 1 },
    { time: 41.46, lane: 4 },
    { time: 43.24, lane: 2 },
    { time: 44.93, lane: 3 },
    { time: 46.83, lane: 1 },
    { time: 48.55, lane: 4 },
    { time: 50.20, lane: 2 },
    { time: 51.99, lane: 3 },
    { time: 54.02, lane: 1 },
    { time: 55.49, lane: 4 },
    { time: 57.58, lane: 2 },
    { time: 58.98, lane: 3 },
    { time: 61.15, lane: 1 },
    { time: 62.50, lane: 4 },
    { time: 64.66, lane: 2 },
    { time: 64.88, lane: 3 },
    { time: 66.59, lane: 1 },
    { time: 68.35, lane: 4 },
    { time: 70.17, lane: 2 },
    { time: 72.08, lane: 3 },
    { time: 74.12, lane: 1 },
    { time: 76.38, lane: 4 },
    { time: 78.52, lane: 2 },
    { time: 80.79, lane: 3 },
    { time: 82.41, lane: 1 },
    { time: 84.26, lane: 4 },
    { time: 86.12, lane: 2 },
    { time: 88.49, lane: 3 },
    { time: 90.13, lane: 1 },
    { time: 92.30, lane: 4 },
    { time: 94.42, lane: 2 },
    { time: 96.75, lane: 3 },
    { time: 98.91, lane: 1 }
];

    beatMap.forEach(beat => {
                const noteKey = `${beat.time}-${beat.lane}`;
        if (currentTime < beat.time && beat.time - currentTime < 0.2) {
        if (!this.generatedNotes.has(beat.time))
    console.log(`ÁîüÊàêÈü≥Á¨¶ -> ËΩ¶ÈÅì ${beat.lane}, Êó∂Èó¥: ${beat.time}`);
            this.createNote(beat.lane);
            this.generatedNotes.add(beat.time);
        }
    });
}

showUnlockedMember(score) {
    const memberData = this.memberPhotos[score];
    if (!memberData) return;

    const unlockedWin = document.getElementById("unlocked-members");
    unlockedWin.style.display = "block";

        // ‚úÖ ÂèñÊ∂à‰∏é RhythmGame ÁªëÂÆö
    unlockedWin.style.position = "fixed";  // Á°Æ‰øùÂÆÉÁõ∏ÂØπËßÜÂè£ÂÆö‰ΩçÔºåËÄå‰∏çÊòØÂÖ∂‰ªñÂÖÉÁ¥†
    unlockedWin.style.zIndex = "1000";     // Á°Æ‰øùÂÆÉÂú®ÊúÄÂâçÈù¢
    unlockedWin.style.margin = "0";        // Èò≤Ê≠¢Â§ñÈÉ®ÂΩ±Âìç

    // ËÆ°ÁÆóÁ™óÂè£Â±Ö‰∏≠ÔºåÂπ∂Á°Æ‰øù‰∏ç‰ºöË∂ÖÂá∫ËßÜÂè£
    const winWidth = unlockedWin.offsetWidth;
    const winHeight = unlockedWin.offsetHeight;
    let left = (window.innerWidth - winWidth) / 2;
    let top = (window.innerHeight - winHeight) / 2;

    left = Math.max(0, Math.min(left, window.innerWidth - winWidth));
    top = Math.max(0, Math.min(top, window.innerHeight - winHeight));

    // ÁªëÂÆöÊãñÂä®
    const titleBar = unlockedWin.querySelector('.title-bar');
    if (titleBar) makeDraggable(unlockedWin, titleBar);

    // ËÆ©Á™óÂè£ÂßãÁªàÊ®™ÂêëÂ¢ûÈïø
    unlockedWin.style.whiteSpace = "nowrap";
    unlockedWin.style.width = "auto";
    unlockedWin.style.maxWidth = "90vw"; // Èò≤Ê≠¢Ë∂ÖÂá∫Â±èÂπï

    // ÂàõÂª∫Êñ∞ÊàêÂëòÁÖßÁâá
    const img = document.createElement("img");
    img.src = memberData.image;
    img.style.cssText = "width: 80px; margin: 5px; image-rendering: pixelated;";
    img.alt = memberData.name;

    // Âä†ÂÖ•ÊàêÂëòÂ±ïÁ§∫Âå∫
    document.getElementById("members-container").appendChild(img);

    // ÊòæÁ§∫Ëß£ÈîÅÁ™óÂè£Ôºå‰ΩÜ‰∏çÂΩ±ÂìçÊ∏∏Êàè
    document.getElementById("unlocked-members").style.display = "flex";

    // üéâ Êñ∞Â¢ûËß£ÈîÅÊèêÁ§∫Ôºå‰∏çÊâìÊñ≠Ê∏∏Êàè
    const unlockMessage = document.createElement("div");
    unlockMessage.textContent = `üéâ Ëß£ÈîÅ ${memberData.name}ÔºÅ`;
    unlockMessage.style.cssText = `
        position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8); color: white; padding: 10px 20px;
        border-radius: 5px; font-size: 14px; z-index: 9999;
    `;
    document.body.appendChild(unlockMessage);

    // 3 ÁßíÂêéËá™Âä®Ê∂àÂ§±
    setTimeout(() => unlockMessage.remove(), 3000);

    document.getElementById("close-members-btn").addEventListener("click", () => {
    document.getElementById("unlocked-members").style.display = "none";
});

}



  stop() {
    if (!this.isPlaying) return;

    // ÂÅúÊ≠¢Èü≥‰πê
    this.song.pause();
    this.song.currentTime = 0;

    // ÂÅúÊ≠¢Ê∏∏ÊàèÂæ™ÁéØ
    this.isPlaying = false;

    // Ê∏ÖÈô§ÊâÄÊúâÈü≥Á¨¶
    this.notes.forEach(note => note.element.remove());
    this.notes = [];

    // ÈáçÁΩÆËøûÂáªÂíåÂàÜÊï∞ÊòæÁ§∫
    this.combo = 0;
    this.updateDisplay();

    // üéØ ÁßªÈô§ game-icon
    const gameIcon = document.getElementById('game-icon');
    if (gameIcon) gameIcon.remove();

    // ÊòæÁ§∫Ê∏∏ÊàèÂ∑≤ÂÅúÊ≠¢ÁöÑÊèêÁ§∫
    console.log("Ê∏∏ÊàèÂ∑≤ÂÅúÊ≠¢");
  }

createNote(lane) {
    const note = document.createElement('div');
    note.className = 'note';
    note.style.cssText = `
        width: 40px;
        height: 20px;
        background: ${['#FF69B4','#7FFF00','#00BFFF','#FFD700'][lane-1]};
        position: absolute;
        left: ${(lane-1) * 100 + 50}px;
        top: 0px;
        transition: transform 2s linear;
        z-index: 1000;
    `;

    this.gameArea.appendChild(note);
    console.log(`ÂàõÂª∫Èü≥Á¨¶: ËΩ¶ÈÅì ${lane}`); // Ë∞ÉËØïÊó•Âøó

    // ËÆ©Èü≥Á¨¶ÁßªÂä®Âà∞Â∫ïÈÉ®
    setTimeout(() => {
        note.style.transform = `translateY(${this.gameArea.offsetHeight}px)`;
    }, 50);  // 50ms Á°Æ‰øù transition ÁîüÊïà

    this.notes.push({
        element: note,
        lane: lane,
        active: true,
        hit: false
    });
}

updateNotes() {
    this.notes = this.notes.filter(note => {
        const rect = note.element.getBoundingClientRect();
        const gameAreaRect = this.gameArea.getBoundingClientRect();

        if (rect.bottom > gameAreaRect.bottom) { // Èü≥Á¨¶Ë∂ÖÂá∫ËåÉÂõ¥
            note.element.remove();
            if (!note.hit) this.combo = 0;
            return false;
        }
        return true;
    });
    this.notes = this.notes.filter(note => note.active); // ‰ªÖ‰øùÁïôÊú™ÁßªÈô§ÁöÑÈü≥Á¨¶
}

  handleInput(e) {
    if (!this.isPlaying || !this.keyMap[e.key]) return;

    const lane = this.keyMap[e.key];
    const currentTime = performance.now();

    // Êü•ÊâæÂèØÂáªÊâìÁöÑÈü≥Á¨¶
    const hitNote = this.notes.find(n =>
      n.active &&
      n.lane === lane &&
      !n.hit &&
      this.checkNotePosition(n.element)
    );

    if (hitNote) {
      this.processHit(hitNote);
    } else {
      this.combo = Math.max(0, this.combo - 1);
    }
  }

checkNotePosition(element) {
    const notePos = element.getBoundingClientRect();
    const gameAreaRect = this.gameArea.getBoundingClientRect();

    // Âà§ÂÆöÁ™óÂè£Â§ßÂ∞è
    return notePos.bottom >= gameAreaRect.bottom - 60 &&
           notePos.top <= gameAreaRect.bottom - 20;
}

  processHit(note) {
    note.hit = true;
    note.active = false;
    this.score += 100 + (this.combo * 50);
    this.combo++;

    // ËßÜËßâÂèçÈ¶à
    note.element.style.background = '#FFFFFF';
    note.element.style.boxShadow = '0 0 15px rgba(255,255,255,0.8)';

    // Á≤íÂ≠êÊïàÊûú
    this.createParticleEffect(note.element);

    setTimeout(() => note.element.remove(), 100);
    this.updateDisplay();
  }

  createParticleEffect(sourceElement) {
    for(let i = 0; i < 8; i++) {
      const particle = document.createElement('div');
      const rect = sourceElement.getBoundingClientRect();

      particle.style.cssText = `
        width: 6px;
        height: 6px;
        background: ${sourceElement.style.background};
        position: absolute;
        left: ${rect.left + rect.width/2 - 3}px;
        top: ${rect.top + rect.height/2 - 3}px;
        border-radius: 50%;
        pointer-events: none;
      `;

      document.body.appendChild(particle);

      particle.animate([
        { transform: 'scale(1)', opacity: 1 },
        {
          transform: `translate(${Math.random()*60-30}px, ${Math.random()*60-30}px) scale(0)`,
          opacity: 0
        }
      ], {
        duration: 800,
        easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
      });

      setTimeout(() => particle.remove(), 800);
    }
  }

  updateDisplay() {
    document.getElementById('score').textContent = this.score;
    document.getElementById('combo').textContent = this.combo;

    this.checkUnlocks();

    if (this.score > this.highScore) {
      this.highScore = this.score;
      localStorage.setItem('njHighScore', this.highScore);
      this.renderHighScore();
    }
  }

checkUnlocks() {
    Object.keys(this.memberPhotos).forEach(score => {
        if (this.score >= score && !this.unlockedMembers.has(score)) {
            this.unlockedMembers.add(score);
            this.showUnlockedMember(score);
        }
    });
}
reset() {
    this.notes.forEach(n => n.element.remove());
    this.notes = [];

    this.score = 0;
    this.combo = 0;
    this.isPlaying = false;
    this.song.pause();
    this.song.currentTime = 0;

    this.updateDisplay();
}

addGameIcon() {
    const gameArea = document.getElementById('game-area');
    if (!gameArea) return;

    // ËÆæÁΩÆËÉåÊôØÂõæ
    gameArea.style.background = "black url('images/icons/game-icon.gif') no-repeat center center";
    gameArea.style.backgroundSize = "cover";
}

}
document.getElementById("show-guide-btn").addEventListener("click", () => {
    const guideWindow = document.getElementById("game-guide");
    guideWindow.style.display = "block";  // ÊòæÁ§∫Á™óÂè£

    // Á¶ÅÁî®Ê∏∏Êàè & ÂÖ∂‰ªñÊìç‰Ωú
    document.getElementById("start-game-btn").disabled = true;
    document.getElementById("show-guide-btn").disabled = true;
    document.getElementById("difficulty").disabled = true;
});

document.getElementById("close-guide-btn").addEventListener("click", () => {
    const guideWindow = document.getElementById("game-guide");
    guideWindow.style.display = "none";  // ÂÖ≥Èó≠Á™óÂè£

    // ÈáçÊñ∞ÂêØÁî®Ê∏∏Êàè & ÊåâÈíÆ
    document.getElementById("start-game-btn").disabled = false;
    document.getElementById("show-guide-btn").disabled = false;
    document.getElementById("difficulty").disabled = false;
});


   // ÂàùÂßãÂåñÊ∏∏Êàè
   const game = new RhythmGame();
document.querySelector('#start-game-btn').addEventListener('click', () => game.start());
document.addEventListener('keydown', (e) => game.handleInput(e));

// ÂõæÁâáË∑ØÂæÑÊï∞ÁªÑ
const photos = [
    "images/group/group1.jpg",
    "images/group/group2.jpg",
    "images/group/group3.jpg",
    "images/group/group4.jpg",
    "images/group/group5.jpg"
];



let currentIndex = 0;

// Êõ¥Êñ∞ÂõæÁâáÊòæÁ§∫
function updatePhoto() {
    document.getElementById("group-photo").src = photos[currentIndex];
}

// ÂàáÊç¢Âà∞‰∏ä‰∏ÄÂº†
function prevPhoto() {
    currentIndex = (currentIndex - 1 + photos.length) % photos.length;
    updatePhoto();
}

// ÂàáÊç¢Âà∞‰∏ã‰∏ÄÂº†
function nextPhoto() {
    currentIndex = (currentIndex + 1) % photos.length;
    updatePhoto();
}
function makeDraggable(element, handle) {
    let offsetX = 0, offsetY = 0, isDragging = false;

    handle.addEventListener("mousedown", (e) => {
        isDragging = true;
        offsetX = e.clientX - element.getBoundingClientRect().left;
        offsetY = e.clientY - element.getBoundingClientRect().top;
        element.style.zIndex = 999;
        document.body.style.userSelect = "none"; // Èò≤Ê≠¢ÊãñÂä®Êó∂ÈÄâ‰∏≠ÊñáÂ≠ó
    });

    document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;

        let newX = e.clientX - offsetX;
        let newY = e.clientY - offsetY;

        // Ëé∑ÂèñËßÜÂè£Â∞∫ÂØ∏
        const maxX = window.innerWidth - element.offsetWidth;
        const maxY = window.innerHeight - element.offsetHeight;

        // ÈôêÂà∂Á™óÂè£Âú®ËßÜÂè£ÂÜÖ
        newX = Math.max(0, Math.min(newX, maxX));
        newY = Math.max(0, Math.min(newY, maxY));

        element.style.left = `${newX}px`;
        element.style.top = `${newY}px`;
    });

    document.addEventListener("mouseup", () => {
        isDragging = false;
        document.body.style.userSelect = "auto"; // ÂÖÅËÆ∏ÂÜçÊ¨°ÈÄâ‰∏≠ÊñáÂ≠ó
    });
}

// ÁªëÂÆöÊâÄÊúâÂèØÊãñÂä®Á™óÂè£
window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll('.windows98-panel').forEach(win => {
        const titleBar = win.querySelector('.title-bar');
        if (titleBar) makeDraggable(win, titleBar);
    });

    // Ëß£Áªë unlocked-members Á™óÂè£ÁöÑÁâπÊÆäÁªëÂÆöÔºå‰ΩøÂÖ∂Áã¨Á´ã
    const unlockedMembersWin = document.getElementById("unlocked-members");
    if (unlockedMembersWin) {
        unlockedMembersWin.style.position = "fixed"; // Á°Æ‰øùÂõ∫ÂÆö‰∫éËßÜÂè£
        const titleBar = unlockedMembersWin.querySelector('.title-bar');
        if (titleBar) makeDraggable(unlockedMembersWin, titleBar);
    }
});

    document.getElementById("close-members-btn").addEventListener("click", (e) => e.stopPropagation());
</script>
</body>
</html>
